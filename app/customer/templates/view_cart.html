{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/tables.css') }}">
{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Your Shopping Cart</h2>

    {# Display Pending Carts #}
    <h3>Pending Carts</h3>
    {% if pending_cart_items %}
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">Product</th>
                <th scope="col">Quantity</th>
                <th scope="col">Unit Price</th>
                <th scope="col">Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in pending_cart_items %}
            <tr>
                <td>{{ item.product.product_name }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.product.unit_price | currency }}</td>
                <td>{{ (item.quantity * item.product.unit_price) | currency }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <h4>Grand Total (Pending Carts): {{ grand_total_pending | currency }}</h4>

    <div class="row mt-4">
        <div class="col-md-6 text-right">
            <form method="POST" action="{{ url_for('customer.checkout') }}">
                <button type="submit" class="btn btn-primary">Place Order</button>
            </form>
        </div>
    </div>

    {% else %}
    <div class="alert alert-warning" role="alert">
        You have no pending carts.
    </div>
    {% endif %}
</div>
{% endblock %}
